gcp_project_id: utxoiq-prod
gcp_region: us-central1
domain: utxoiq.com

services:
  web-api:
    image: gcr.io/utxoiq-prod/utxoiq-web-api:latest
    port: 8080
    cpu: "4"
    memory: 2Gi
    min_instances: 2
    max_instances: 50
    timeout: 300
    env_vars:
      ENVIRONMENT: production
      LOG_LEVEL: WARNING
      CORS_ORIGINS: https://utxoiq.com
    secrets:
      DATABASE_URL: database-url
      FIREBASE_CREDENTIALS: firebase-credentials
      STRIPE_SECRET_KEY: stripe-secret-key

  feature-engine:
    image: gcr.io/utxoiq-prod/utxoiq-feature-engine:latest
    port: 8080
    cpu: "8"
    memory: 4Gi
    min_instances: 2
    max_instances: 20
    timeout: 600
    env_vars:
      ENVIRONMENT: production
      LOG_LEVEL: WARNING
      CONFIDENCE_THRESHOLD: "0.7"
    secrets:
      BIGQUERY_CREDENTIALS: bigquery-credentials

  insight-generator:
    image: gcr.io/utxoiq-prod/utxoiq-insight-generator:latest
    port: 8080
    cpu: "4"
    memory: 2Gi
    min_instances: 1
    max_instances: 15
    timeout: 600
    env_vars:
      ENVIRONMENT: production
      LOG_LEVEL: WARNING
    secrets:
      VERTEX_AI_CREDENTIALS: vertex-ai-credentials
      BIGQUERY_CREDENTIALS: bigquery-credentials

  chart-renderer:
    image: gcr.io/utxoiq-prod/utxoiq-chart-renderer:latest
    port: 8080
    cpu: "2"
    memory: 1Gi
    min_instances: 1
    max_instances: 10
    timeout: 300
    env_vars:
      ENVIRONMENT: production
      LOG_LEVEL: WARNING
    secrets:
      GCS_CREDENTIALS: gcs-credentials

  x-bot:
    image: gcr.io/utxoiq-prod/utxoiq-x-bot:latest
    port: 8080
    cpu: "1"
    memory: 512Mi
    min_instances: 1
    max_instances: 3
    timeout: 300
    env_vars:
      ENVIRONMENT: production
      LOG_LEVEL: WARNING
    secrets:
      X_API_CREDENTIALS: x-api-credentials
      DATABASE_URL: database-url

  email-service:
    image: gcr.io/utxoiq-prod/utxoiq-email-service:latest
    port: 8080
    cpu: "1"
    memory: 512Mi
    min_instances: 1
    max_instances: 10
    timeout: 300
    env_vars:
      ENVIRONMENT: production
      LOG_LEVEL: WARNING
    secrets:
      SENDGRID_API_KEY: sendgrid-api-key
      DATABASE_URL: database-url
